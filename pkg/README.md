# Go的包组织方式

## 1. main 包和 main 函数

在Go语言中，main包和main函数有特殊的地位和作用，它们是Go程序的入口点。

**main包的特殊性：**

1. main包是一个特殊的包名，它表示程序的入口包
2. 一个Go程序必须有一个且只能有一个main包
3. 当编译Go程序时，编译器会寻找main包作为程序的起点

**main函数的特殊性：**

1. main函数是程序的入口函数
2. 它必须定义在main包中
3. 它没有参数和返回值
4. 当main函数执行完毕时，程序就退出了

## 2. go源代码包名/文件名

1. 在 Go 中，同一个包下的源代码文件视为一个整体，文件名没有特殊含义，不同的文件只作为分隔源代码的一种组织方式。
2. 文件中包名可以和所在文件夹名不一致，导包时路径写文件夹路径，使用时使用包名，即 `包名.函数名` 来调用包中任意公开函数，不区分文件。但尽量保持包名与文件夹名一致，这是 Go 社区的普遍约定。
3. 一个目录（文件夹）中的所有.go文件必须属于同一个包。
4. 不过，文件名有一些约定习惯如下。

- Go 文件名通常使用小写字母，单词间用下划线 `_` 分隔，也有小写字母直接连写的形式比如：`myfile.go`。
- 测试文件通常以 `_test.go` 结尾，`*_test.go` 文件只有在运行 `go test` 时才会被编译执行。
- `_windows.go`、`_linux.go`、`_amd64.go`、`_arm.go` 等后缀通常用来指定特定系统或架构才编译执行。
- 文件名不影响包名：不管文件名是什么，包名由文件中的 `package` 声明决定。
- 命令源文件：当编译可执行程序时，必须有一个 `main` 包的 `main` 函数，但文件名无关紧要。

## 3. `go run .` 和 `go run xxx.go` 的区别

命令 | 特点 | 限制
-|-|-
`go run xxx.go` | 直接运行指定的单个 Go 文件 <br> 仅适用于只有一个文件的简单程序 <br> 该文件必须是 main 包且包含 main 函数 | 不能处理多文件项目（无法自动识别同包的其他文件） <br> 不能正确处理项目中的包依赖关系 <br> 不适合有多个文件的复杂项目
`go run .` | 运行当前目录下的整个包（必须是 main 包）<br> 会自动编译当前目录下的所有 .go 文件 能正确处理多文件项目 <br> 会考虑项目的完整依赖关系 <br> 适用于多文件项目 <br> 是开发中更推荐的方式 <br> 行为更接近实际的 go build
